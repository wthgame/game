option ClientOutput = "src/client/net.luau"
option ServerOutput = "src/server/net.luau"
option Typescript = true
option PromiseLibrary = "ReplicatedStorage.WTHShared.include.Promise"
option Casing = Camel

scope mechanics {
    enum DamageKind = {
        -- Equivalant to EToH's normal damage
        Normal,
        -- Equivalant to EToH's ouch damage
        Heavy,
        -- Equivalant to EToH's instakill damage, or just kills the player
        Lethal
    }

    event damageSelfVariable {
        from: Client,
        type: Reliable,
        call: ManyAsync,
        data: u32
    }

    event damageSelf {
        from: Client,
        type: Reliable,
        call: ManyAsync,
        data: DamageKind
    }
}

scope areas {
    function loadArea {
        yield: Promise,
        data: string,
        return: Instance
    }

    event confirmAreaLoaded {
        from: Client,
        type: Reliable,
        call: ManyAsync
    }
}

scope towers {
    enum TowerRunType = { Standard, Practice }

    struct StartTowerRun {
        towerType: TowerRunType,
        towerName: string
    }

    struct StartTowerRunResult {
        instance: Instance,
        mechanics: Instance,
    }

    function startTowerRun {
        yield: Promise,
        data: StartTowerRun,
        return: StartTowerRunResult?
    }

    function requestDetailsInTower {
        yield: Promise,
        return: Instance
    }
}
